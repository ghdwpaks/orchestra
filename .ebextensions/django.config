# .ebextensions/django.config

option_settings:
  aws:elasticbeanstalk:container:python:
    WSGIPath: orchestra/wsgi.py  # WSGI 파일 경로를 Django 프로젝트에 맞게 설정
    NumProcesses: 1                # 동시 프로세스 수 (적절히 조정 가능)
    NumThreads: 8                 # 스레드 수 (적절히 조정 가능)

  aws:elasticbeanstalk:application:environment:
    DJANGO_SETTINGS_MODULE: "orchestra.settings.production"  # settings 파일 설정
    PYTHONPATH: "/opt/python/current/app/backend"       # Python 경로 설정 (프로젝트 위치에 맞게 조정)

# Python 패키지 설치 명령
packages:
  yum:
    git: []  # git을 yum으로 설치 (필요 시)

# 명령 실행 (마이그레이션, 정적 파일 수집 등)
container_commands:
  01_migrate:
    command: "python3 manage.py migrate --noinput"
    leader_only: true  # 한 번만 실행
  02_collectstatic:
    command: "python3 manage.py collectstatic --noinput"
    leader_only: true

# 보안 그룹을 통해 접근을 제한하고 필요한 포트를 열거나 DB 설정을 추가할 수 있습니다.
